"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const sleep_1 = __importDefault(require("../../../misc/sleep"));
const RpProfile_1 = __importDefault(require("../../classes/RpProfile"));
async function processBackLog() {
    this.profileProcessing = true;
    console.log("Processing backlog of " + this.profileRequests.length + " requests");
    for (let i = 0; i < this.profileRequests.length; i++) {
        const request = this.profileRequests[i];
        const startTime = Date.now();
        const profileName = await RpProfile_1.default.assignNewProfile(request, this);
        if (profileName) {
            this.a3DebugMsg("Profile " + profileName + " generated by GPT-3 in " + (Date.now() - startTime) + "ms");
            if (this.profileRequests.length - i > 0) {
                this.a3DebugMsg("Backlog of " + (this.profileRequests.length - i) + " requests remaining");
            }
            ;
        }
        ;
        await (0, sleep_1.default)(3000);
        this.profileRequests.splice(i, 1);
        i--;
    }
    this.profileProcessing = false;
}
exports.default = processBackLog;
;
